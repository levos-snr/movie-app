{"ast":null,"code":"var _jsxFileName = \"/home/lewis/papareact-challenge/papareact-day3/src/List.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport StarRoundedIcon from \"@material-ui/icons/StarRounded\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport TextTruncate from \"react-text-truncate\";\nimport defaultImage from \"./assets/default.jpg\";\nimport numeral from \"numeral\";\nimport \"./List.css\";\nimport axios from './axios';\nimport requests, { imageBase } from './api';\n\nfunction List({\n  setMovieId,\n  setLoading\n}) {\n  const [genres, setGenres] = useState([]);\n  const [popularMovies, setPopularMovies] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      axios.get(requests.fetchGenres).then(response => {\n        setGenres(response.data.genres);\n      }).catch(err => errorOccurred(err));\n      axios.get(requests.fetchPopularMovies).then(response => {\n        setPopularMovies(response.data.results.reverse());\n      }).catch(err => errorOccurred(err));\n    };\n\n    fetchData();\n  }, []);\n\n  const errorOccurred = error => {\n    setLoading(false);\n    alert('Something went wrong.');\n    console.log(error.message);\n  };\n\n  const handleClick = movie => {\n    movie.media_type = 'movie';\n    setMovieId(movie);\n    setLoading(true);\n  };\n\n  const getReleaseYear = date => {\n    let year = new Date(date);\n    return year.getFullYear();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list__trending\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, \"Top Rated Movies\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list__items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, popularMovies === null || popularMovies === void 0 ? void 0 : popularMovies.slice(0, 12).map(movie => /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list__item\",\n    onClick: () => handleClick(movie),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    loading: \"lazy\",\n    onError: e => {\n      e.target.onerror = null;\n      e.target.src = defaultImage;\n    },\n    src: `${imageBase}${movie.backdrop_path || movie.poster_path}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list__itemInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"list__itemTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, movie.title || movie.original_title, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"list__itemYear\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 78\n    }\n  }, \"(\", getReleaseYear(movie.release_date || movie.first_air_date), \")\")), /*#__PURE__*/React.createElement(TextTruncate, {\n    line: 2,\n    element: \"p\",\n    containerClassName: \"list__itemOverview\",\n    truncateText: \"\\u2026\",\n    text: movie.tagline || movie.overview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list__rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    name: \"movie-rating\",\n    className: \"movieRating\",\n    value: movie.vote_average / 2 || 0,\n    precision: 0.5,\n    icon: /*#__PURE__*/React.createElement(StarRoundedIcon, {\n      fontSize: \"inherit\",\n      readOnly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 122\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"small\", {\n    className: \"list__likes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 10\n    }\n  }, numeral(movie.vote_average / 2).format('0.0')))))))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list__genreList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, \"Movies by Genre\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"list__genres\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, genres === null || genres === void 0 ? void 0 : genres.map(genre => genre.id !== 10770 && genre.id !== 99 && genre.id !== 37 && genre.id !== 10752 && genre.id !== 9648 && /*#__PURE__*/React.createElement(Button, {\n    className: \"app__button\",\n    onClick: () => console.log(genre.name, genre.id),\n    variant: \"contained\",\n    disableFocusRipple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 111\n    }\n  }, genre.name)))));\n}\n\nexport default List;","map":{"version":3,"sources":["/home/lewis/papareact-challenge/papareact-day3/src/List.js"],"names":["React","useState","useEffect","Button","StarRoundedIcon","Rating","TextTruncate","defaultImage","numeral","axios","requests","imageBase","List","setMovieId","setLoading","genres","setGenres","popularMovies","setPopularMovies","fetchData","get","fetchGenres","then","response","data","catch","err","errorOccurred","fetchPopularMovies","results","reverse","error","alert","console","log","message","handleClick","movie","media_type","getReleaseYear","date","year","Date","getFullYear","slice","map","e","target","onerror","src","backdrop_path","poster_path","title","original_title","release_date","first_air_date","tagline","overview","vote_average","format","genre","id","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport StarRoundedIcon from \"@material-ui/icons/StarRounded\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport TextTruncate from \"react-text-truncate\";\nimport defaultImage from \"./assets/default.jpg\";\nimport numeral from \"numeral\";\nimport \"./List.css\";\nimport axios from './axios';\nimport requests, { imageBase } from './api';\n\nfunction List({ setMovieId, setLoading }) {\n  const [genres, setGenres] = useState([]);\n  const [popularMovies, setPopularMovies] = useState([]);\n\nuseEffect(() => {\n  const fetchData = async () => {\n    axios.get(requests.fetchGenres).then((response) => {\n      setGenres(response.data.genres);\n    }).catch((err) => errorOccurred(err));\n    axios.get(requests.fetchPopularMovies).then((response) => {\n      setPopularMovies(response.data.results.reverse());\n    }).catch((err) => errorOccurred(err));\n  }\n\n  fetchData();\n}, []);\n\n  const errorOccurred = (error) => {\n\tsetLoading(false);\n\talert('Something went wrong.');\n\tconsole.log(error.message);\n  }\n\n\n  const handleClick = (movie) => {\n    movie.media_type = 'movie';\n    setMovieId(movie);\n    setLoading(true);\n  }\n\n  const getReleaseYear = (date) => {\n    let year = new Date(date);\n    return year.getFullYear();\n  }\n\n  return (\n    <div className=\"list\">\n\n\t\t\t<div class=\"list__trending\">\n\t\t\t\t<h4>Top Rated Movies</h4>\n\t\t\t\t<div class=\"list__items\">\n\t\t\t\t\t{ popularMovies?.slice(0, 12).map((movie) => \n\t\t\t\t\t\t(<div class=\"list__item\" onClick={() => handleClick(movie)}>\n\t\t\t\t\t\t\t<img loading=\"lazy\" onError={(e) => {e.target.onerror = null; e.target.src = defaultImage }} src={`${imageBase}${movie.backdrop_path || movie.poster_path}`} />\n\t\t\t\t\t\t\t<div className=\"list__itemInfo\">\n\t\t\t\t\t\t\t\t<h5 className=\"list__itemTitle\">{movie.title || movie.original_title}<span className=\"list__itemYear\">({getReleaseYear(movie.release_date || movie.first_air_date)})</span></h5>\n\t\t\t\t\t\t\t\t<TextTruncate\n\t\t\t\t\t\t\t\t\tline={2}\n\t\t\t\t\t\t\t\t\telement=\"p\"\n\t\t\t\t\t\t\t\t\tcontainerClassName=\"list__itemOverview\"\n\t\t\t\t\t\t\t\t\ttruncateText=\"…\"\n\t\t\t\t\t\t\t\t\ttext={movie.tagline || movie.overview}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"list__rating\">\n\t\t\t\t\t\t\t\t\t<Rating name=\"movie-rating\" className=\"movieRating\" value={(movie.vote_average / 2) || 0} precision={0.5} icon={<StarRoundedIcon fontSize=\"inherit\" readOnly />}/>\n\t\t\t\t\t\t\t\t\t<small className=\"list__likes\">{numeral(movie.vote_average / 2).format('0.0')}</small>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>)\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"list__genreList\">\n\t\t\t\t<h4>Movies by Genre</h4>\n\t\t\t\t<div class=\"list__genres\">\n\t\t\t\t\t{ genres?.map((genre) =>\n\t\t\t\t\t\tgenre.id !== 10770 && genre.id !== 99 && genre.id !== 37 && genre.id !== 10752 && genre.id !== 9648 && (<Button className=\"app__button\" onClick={() => console.log(genre.name, genre.id)} variant=\"contained\" disableFocusRipple>{genre.name}</Button>)\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n  );\n}\n\nexport default List;"]},"metadata":{},"sourceType":"module"}