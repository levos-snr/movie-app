{"ast":null,"code":"var _jsxFileName = \"/home/lewis/papareact-challenge/papareact-day3/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport FeaturedMovie from \"./FeaturedMovie\";\nimport { Route, Redirect, useHistory } from \"react-router-dom\";\nimport List from \"./List\";\nimport BigList from \"./BigList\";\nimport Results from \"./Results\";\nimport Loading from \"./Loading\";\nimport Footer from \"./Footer\";\nimport Login from './Login';\nimport About from './About';\nimport Profile from './Profile';\nimport \"./App.css\";\nimport axios from './axios';\nimport { auth } from './firebase';\nimport requests, { imageLargeBase, imageBase, fetchMovie, fetchTV, fetchSearchString, fetchRecommendedMovies, fetchRecommendedTV, fetchSimilarMovies, fetchSimilarTV } from './api';\nconst listOneInit = {\n  title: \"Latest & Trending Movies\",\n  fetchId: requests.fetchTrendingMovies,\n  type: 'movie'\n};\nconst listTwoInit = {\n  title: \"Top Rated Series For You\",\n  fetchId: requests.fetchTrendingTV,\n  type: 'tv'\n};\n\nfunction App() {\n  const [topRatedMovies, setTopRatedMovies] = useState([]);\n  const [featuredMovie, setFeaturedMovie] = useState([]);\n  const [featTitle, setFeatTitle] = useState(\"Today's Featured Film\");\n  const [truncLine, setTruncLine] = useState(2);\n  const [videoId, setVideoId] = useState('');\n  const [featuredCertification, setFeaturedCertification] = useState('');\n  const [movieId, setMovieId] = useState([]);\n  const [searchResult, setSearchResult] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [listOne, setListOne] = useState(listOneInit);\n  const [listTwo, setListTwo] = useState(listTwoInit);\n  const [firstRun, setFirstRun] = useState(true);\n  const [user, setUser] = useState(null);\n  let popularVisible = listOne === listOneInit;\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(user => {\n      if (user) {\n        setUser(user);\n      } else {\n        setUser(null);\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  const errorOccurred = error => {\n    setLoading(false);\n    alert('Something went wrong.');\n    console.log(error.message);\n  };\n\n  const initRun = async () => {\n    setLoading(true);\n    setFirstRun(true);\n    axios.get(requests.fetchPopularMovies).then(response => {\n      let tempMov = response.data.results;\n      setTopRatedMovies(tempMov);\n      let getFeatured = tempMov[Math.floor(Math.random() * tempMov.length)].id;\n      getMovieInfo(getFeatured);\n      setFeatTitle(\"Today's Featured Film\");\n      setLoading(false);\n    }).catch(err => errorOccurred(err));\n  };\n\n  const resetApp = () => {\n    setLoading(true);\n    setListOne(listOneInit);\n    setListTwo(listTwoInit);\n    setTimeout(() => initRun(), 1000);\n  };\n\n  const getMovieInfo = async movieInfo => {\n    axios.get(fetchMovie(movieInfo)).then(response => {\n      setFeaturedMovie(response.data);\n      let releaseDates = response.data.release_dates.results;\n\n      for (let i = 0; i < releaseDates.length; i++) {\n        if (releaseDates[i].iso_3166_1 === 'US' || releaseDates[i].iso_3166_1 === 'IN') {\n          setFeaturedCertification(releaseDates[i].release_dates[0].certification);\n          break;\n        }\n      }\n\n      ;\n      let videos = response.data.videos.results;\n      let vidId = videos[0].key;\n\n      if (!firstRun) {\n        setListTwo({\n          title: 'Similar Movies',\n          fetchId: fetchSimilarMovies(movieInfo),\n          type: 'movie'\n        });\n        setListOne({\n          title: 'You May Also Like',\n          fetchId: fetchRecommendedMovies(movieInfo),\n          type: 'movie'\n        });\n      }\n\n      setTimeout(() => setFirstRun(false), 1000);\n      setVideoId(vidId);\n      setLoading(false);\n    }).catch(err => errorOccurred(err));\n  };\n\n  const getTVInfo = async movieInfo => {\n    axios.get(fetchTV(movieInfo)).then(response => {\n      setFeaturedMovie(response.data);\n      let contentRating = response.data.content_ratings.results;\n\n      for (let i = 0; i < contentRating.length; i++) {\n        if (contentRating[i].iso_3166_1 === 'US') {\n          setFeaturedCertification(contentRating[i].rating);\n          break;\n        }\n      }\n\n      ;\n      let videos = response.data.videos.results;\n      let vidId = videos[0].key;\n\n      if (!firstRun) {\n        setListTwo({\n          title: 'Similar Series',\n          fetchId: fetchSimilarTV(movieInfo),\n          type: 'tv'\n        });\n        setListOne({\n          title: 'You May Also Like',\n          fetchId: fetchRecommendedTV(movieInfo),\n          type: 'tv'\n        });\n      }\n\n      setFirstRun(false);\n      setVideoId(vidId);\n      setLoading(false);\n    }).catch(err => errorOccurred(err));\n  };\n\n  useEffect(() => {\n    initRun();\n  }, []);\n  useEffect(() => {\n    if (movieId.media_type === 'tv') {\n      getTVInfo(movieId.id);\n      setTruncLine(2);\n      setFeatTitle('Series');\n    }\n\n    if (movieId.media_type === 'movie') {\n      getMovieInfo(movieId.id);\n      setTruncLine(2);\n      setFeatTitle('Movie');\n    }\n\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n      setShowResults(false);\n    }, 100);\n  }, [movieId]);\n  useEffect(() => {\n    var _searchResult$;\n\n    if ((_searchResult$ = searchResult[0]) === null || _searchResult$ === void 0 ? void 0 : _searchResult$.id) {\n      setShowResults(true);\n      setLoading(false);\n    }\n  }, [searchResult]);\n  var overlayStyle = {\n    backgroundImage: `url(${imageLargeBase}${featuredMovie.backdrop_path || featuredMovie.poster_path})`,\n    backgroundSize: 'cover',\n    backgroundPosition: 'top right'\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    setLoading: setLoading,\n    resetApp: resetApp,\n    popularVisible: popularVisible,\n    setSearchResult: setSearchResult,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/about\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(About, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 4\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 3\n    }\n  }, user ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 12\n    }\n  }) : /*#__PURE__*/React.createElement(Login, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 3\n    }\n  }, user ? /*#__PURE__*/React.createElement(Profile, {\n    user: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 12\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, showResults ? /*#__PURE__*/React.createElement(Results, {\n    setLoading: setLoading,\n    searchResult: searchResult,\n    setMovieId: setMovieId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(FeaturedMovie, {\n    featuredCertification: featuredCertification,\n    overlayStyle: overlayStyle,\n    title: featTitle,\n    featuredMovie: featuredMovie,\n    videoId: videoId,\n    setTruncLine: setTruncLine,\n    truncLine: truncLine,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }\n  }), popularVisible && /*#__PURE__*/React.createElement(List, {\n    setLoading: setLoading,\n    setMovieId: setMovieId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(BigList, {\n    notGradient: popularVisible,\n    setLoading: setLoading,\n    setMovieId: setMovieId,\n    type: listOne.type,\n    title: listOne.title,\n    fetchId: listOne.fetchId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(BigList, {\n    notGradient: true,\n    setLoading: setLoading,\n    setMovieId: setMovieId,\n    type: listTwo.type,\n    title: listTwo.title,\n    fetchId: listTwo.fetchId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 3\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/lewis/papareact-challenge/papareact-day3/src/App.js"],"names":["React","useState","useEffect","Header","FeaturedMovie","Route","Redirect","useHistory","List","BigList","Results","Loading","Footer","Login","About","Profile","axios","auth","requests","imageLargeBase","imageBase","fetchMovie","fetchTV","fetchSearchString","fetchRecommendedMovies","fetchRecommendedTV","fetchSimilarMovies","fetchSimilarTV","listOneInit","title","fetchId","fetchTrendingMovies","type","listTwoInit","fetchTrendingTV","App","topRatedMovies","setTopRatedMovies","featuredMovie","setFeaturedMovie","featTitle","setFeatTitle","truncLine","setTruncLine","videoId","setVideoId","featuredCertification","setFeaturedCertification","movieId","setMovieId","searchResult","setSearchResult","showResults","setShowResults","loading","setLoading","listOne","setListOne","listTwo","setListTwo","firstRun","setFirstRun","user","setUser","popularVisible","unsubscribe","onAuthStateChanged","errorOccurred","error","alert","console","log","message","initRun","get","fetchPopularMovies","then","response","tempMov","data","results","getFeatured","Math","floor","random","length","id","getMovieInfo","catch","err","resetApp","setTimeout","movieInfo","releaseDates","release_dates","i","iso_3166_1","certification","videos","vidId","key","getTVInfo","contentRating","content_ratings","rating","media_type","window","scrollTo","overlayStyle","backgroundImage","backdrop_path","poster_path","backgroundSize","backgroundPosition"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport FeaturedMovie from \"./FeaturedMovie\";\nimport { Route, Redirect, useHistory } from \"react-router-dom\";\nimport List from \"./List\";\nimport BigList from \"./BigList\";\nimport Results from \"./Results\";\nimport Loading from \"./Loading\";\nimport Footer from \"./Footer\";\nimport Login from './Login';\nimport About from './About';\nimport Profile from './Profile';\nimport \"./App.css\";\nimport axios from './axios';\nimport {auth} from './firebase';\nimport requests, { imageLargeBase, imageBase, fetchMovie, fetchTV, fetchSearchString, fetchRecommendedMovies, fetchRecommendedTV, fetchSimilarMovies, fetchSimilarTV } from './api';\n\nconst listOneInit = {\n\ttitle: \"Latest & Trending Movies\",\n\tfetchId: requests.fetchTrendingMovies,\n\ttype: 'movie',\n  }\n  const listTwoInit = {\n\ttitle: \"Top Rated Series For You\",\n\tfetchId: requests.fetchTrendingTV,\n\ttype: 'tv',\n  }\n\nfunction App() {\n  const [topRatedMovies, setTopRatedMovies] = useState([]);\n  const [featuredMovie, setFeaturedMovie] = useState([]);\n  const [featTitle, setFeatTitle] = useState(\"Today's Featured Film\");\n  const [truncLine, setTruncLine] = useState(2);\n  const [videoId, setVideoId] = useState('');\n  const [featuredCertification, setFeaturedCertification] = useState('');\n  const [movieId, setMovieId] = useState([]);\n  const [searchResult, setSearchResult] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [listOne, setListOne] = useState(listOneInit);\n  const [listTwo, setListTwo] = useState(listTwoInit);\n  const [firstRun, setFirstRun] = useState(true);\n  const [user, setUser] = useState(null);\n  let popularVisible = listOne === listOneInit;\n  \n    useEffect(()=> {\n\t\tconst unsubscribe = auth.onAuthStateChanged((user) => {\n\t\t\tif(user) {\n\t\t\t\tsetUser(user);\n\t\t\t} else {\n\t\t\t\tsetUser(null);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn unsubscribe;\n\t}, []);\n  \n  const errorOccurred = (error) => {\n\tsetLoading(false);\n\talert('Something went wrong.');\n\tconsole.log(error.message);\n  }\n  \n  const initRun = async () => {\n  \tsetLoading(true);\n  \tsetFirstRun(true);\n\t  axios.get(requests.fetchPopularMovies).then((response) => {\n      \tlet tempMov = response.data.results;\n      \tsetTopRatedMovies(tempMov);\n      \tlet getFeatured = tempMov[Math.floor(Math.random() * tempMov.length)].id;\n      \tgetMovieInfo(getFeatured);\n      \tsetFeatTitle(\"Today's Featured Film\");\n\t \tsetLoading(false);\n       }).catch((err) => errorOccurred(err));\n\t }\n\t \n  const resetApp = () => {\n  \tsetLoading(true);\n  \tsetListOne(listOneInit);\n  \tsetListTwo(listTwoInit);\n  \tsetTimeout(() => initRun(), 1000);\n  }\n  \n  const getMovieInfo = async (movieInfo) => {\n    axios.get(fetchMovie(movieInfo)).then((response) => {\n      setFeaturedMovie(response.data);\n\t let releaseDates = response.data.release_dates.results;\n\t for (let i = 0; i < releaseDates.length; i++) {\n\t\tif (releaseDates[i].iso_3166_1 === 'US' || releaseDates[i].iso_3166_1 === 'IN') {\n\t\t\tsetFeaturedCertification(releaseDates[i].release_dates[0].certification);\n\t\t\tbreak;\n\t\t}\n\t };\n      let videos = response.data.videos.results;\n      let vidId = videos[0].key;\n\t if (!firstRun) {\n\t \tsetListTwo({\n\t\t\ttitle: 'Similar Movies',\n\t\t\tfetchId: fetchSimilarMovies(movieInfo),\n\t\t\ttype: 'movie',\n\t \t});\n\t \tsetListOne({\n\t\t\ttitle: 'You May Also Like',\n\t\t\tfetchId: fetchRecommendedMovies(movieInfo),\n\t\t\ttype: 'movie',\n\t \t});\n\t }\n\t setTimeout(()=>setFirstRun(false), 1000);\n      setVideoId(vidId);\n\t setLoading(false);\n    }).catch((err) => errorOccurred(err));\n  }\n  const getTVInfo = async (movieInfo) => {\n    axios.get(fetchTV(movieInfo)).then((response) => {\n      setFeaturedMovie(response.data);\n\t let contentRating = response.data.content_ratings.results;\n\t for (let i = 0; i < contentRating.length; i++) {\n\t\tif (contentRating[i].iso_3166_1 === 'US') {\n\t\t\tsetFeaturedCertification(contentRating[i].rating);\n\t\t\tbreak;\n\t\t}\n\t };\n      let videos = response.data.videos.results;\n      let vidId = videos[0].key;\n\t if (!firstRun) {\n\t \tsetListTwo({\n\t\t\ttitle: 'Similar Series',\n\t\t\tfetchId: fetchSimilarTV(movieInfo),\n\t\t\ttype: 'tv',\n\t \t});\n\t \tsetListOne({\n\t\t\ttitle: 'You May Also Like',\n\t\t\tfetchId: fetchRecommendedTV(movieInfo),\n\t\t\ttype: 'tv',\n\t \t});\n\t }\n\t setFirstRun(false);\n      setVideoId(vidId);\n\t setLoading(false);\n    }).catch((err) => errorOccurred(err));\n  }\n\n  useEffect(() => {\n\tinitRun();\n  }, []);\n\n  useEffect(() => {\n    if (movieId.media_type === 'tv') {\n      getTVInfo(movieId.id);\n      setTruncLine(2);\n      setFeatTitle('Series');\n    }\n    if (movieId.media_type === 'movie') {\n      getMovieInfo(movieId.id);\n      setTruncLine(2);\n      setFeatTitle('Movie');\n    }\n    setTimeout(() => {\n      window.scrollTo(0, 0);\n      setShowResults(false);\n    }, 100);\n  }, [movieId]);\n\n  useEffect(() => {\n    if (searchResult[0]?.id) {\n      setShowResults(true);\n      setLoading(false);\n    }\n  }, [searchResult]);\n\n  var overlayStyle = {\n    backgroundImage: `url(${imageLargeBase}${featuredMovie.backdrop_path || featuredMovie.poster_path})`,\n    backgroundSize: 'cover',\n    backgroundPosition: 'top right',\n  }\n\n  return (\n    <div className=\"app\">\n\t\t{loading && <Loading />}\n\t\t\n\t\t<Header setLoading={setLoading} resetApp={resetApp} popularVisible={popularVisible} setSearchResult={setSearchResult} />\n\n\t\t<Route path='/about'>\n\t\t\t<About/>\n\t\t</Route>\n\t\t\n\t\t<Route path='/login'>\n\t\t\t{user ? <Redirect to=\"/profile\" /> : <Login/>}\n\t\t</Route>\n\t\t\n\t\t<Route path='/profile'>\n\t\t\t{user ? <Profile user={user}/> : <Redirect to=\"/login\" />}\n\t\t</Route>\n\t\t\n\t\t<Route exact path='/'>\n\t\t\t<>\n\t\t\t{showResults ?\n\t\t\t\t<Results setLoading={setLoading} searchResult={searchResult} setMovieId={setMovieId} /> : \n\t\t\t\t<FeaturedMovie featuredCertification={featuredCertification} overlayStyle={overlayStyle} title={featTitle} featuredMovie={featuredMovie} videoId={videoId} setTruncLine={setTruncLine} truncLine={truncLine} />}\n\n\t\t\t{popularVisible && <List setLoading={setLoading} setMovieId={setMovieId} />}\n\t\t\t\t<BigList notGradient={popularVisible} setLoading={setLoading} setMovieId={setMovieId} type={listOne.type} title={listOne.title} fetchId={listOne.fetchId}/>\n\t\t\t\t<BigList notGradient={true} setLoading={setLoading} setMovieId={setMovieId} type={listTwo.type} title={listTwo.title} fetchId={listTwo.fetchId}/>\n\t\t\t</>\n\t\t</Route>\n\t\t\n\t\t<Footer />\n\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}