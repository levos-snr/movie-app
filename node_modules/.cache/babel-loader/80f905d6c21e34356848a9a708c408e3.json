{"ast":null,"code":"var _jsxFileName = \"/home/lewis/papareact-challenge/papareact-day3/src/Header.js\";\nimport React, { useState, useRef } from 'react';\nimport SearchRoundedIcon from \"@material-ui/icons/SearchRounded\";\nimport ChevronLeftRoundedIcon from \"@material-ui/icons/ChevronLeftRounded\";\nimport \"./Header.css\";\nimport axios from './axios';\nimport requests, { imageBase, fetchMovie, fetchTV, fetchSearchString, setLoading } from './api';\nimport NFLogo from './assets/logo.png';\nimport UserIcon from './assets/nfuser.jpg';\nimport { auth } from './firebase';\nimport { useHistory, useLocation, NavLink } from 'react-router-dom';\n\nfunction Header({\n  setSearchResult,\n  setLoading,\n  popularVisible,\n  resetApp\n}) {\n  var _auth$currentUser, _auth$currentUser2, _auth$currentUser3;\n\n  const [input, setInput] = useState('');\n  const inputEl = useRef(null);\n  const searchEl = useRef(null);\n  const [searchOpen, setSearchOpen] = useState(false);\n  const history = useHistory();\n  const location = useLocation();\n\n  const errorOccurred = error => {\n    setLoading(false);\n    alert('Something went wrong.');\n    console.log(error.message);\n  };\n\n  const goBack = () => {\n    resetApp();\n    history.push('/');\n  };\n\n  const searchQuery = query => {\n    history.push('/');\n    axios.get(fetchSearchString(query)).then(response => {\n      if (response.data.total_results < 1) {\n        alert(\"No Results Found\");\n        setLoading(false);\n      } else {\n        setSearchResult(response.data.results);\n      }\n    }).catch(err => errorOccurred(err));\n  };\n\n  const handleSearch = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    searchQuery(input);\n    setSearchOpen(false);\n    inputEl.current.blur();\n    setLoading(true);\n    setTimeout(() => setInput(''), 100);\n  };\n\n  const handleUser = () => {\n    if (auth.currentUser) {\n      history.push('/profile');\n    } else {\n      history.push('/login');\n    }\n  };\n\n  const searchClick = () => {\n    setSearchOpen(true);\n    setTimeout(() => {\n      inputEl.current.focus();\n    }, 300);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"app__nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 4\n    }\n  }, (!popularVisible || location.pathname !== '/') && /*#__PURE__*/React.createElement(\"li\", {\n    className: \"app__back mobile\",\n    onClick: goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(ChevronLeftRoundedIcon, {\n    style: {\n      fontSize: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 106\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: `app__search mobile ${searchOpen || input ? \"open\" : \"\"}`,\n    onClick: searchClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SearchRoundedIcon, {\n    style: {\n      fontSize: 20\n    },\n    className: \"app__searchIcon\",\n    onClick: searchClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputEl,\n    type: \"search\",\n    value: input,\n    onBlur: () => setSearchOpen(false),\n    onChange: e => setInput(e.target.value),\n    placeholder: \"Search...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => handleSearch(e),\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    exact: true,\n    to: \"/\",\n    activeClassName: \"active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/about\",\n    activeClassName: \"active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"About\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Movies\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, \"Series\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Featured\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__user\",\n    onClick: handleUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: ((_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.photoURL) || UserIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, ((_auth$currentUser2 = auth.currentUser) === null || _auth$currentUser2 === void 0 ? void 0 : _auth$currentUser2.displayName) || ((_auth$currentUser3 = auth.currentUser) === null || _auth$currentUser3 === void 0 ? void 0 : _auth$currentUser3.email) || 'Login')), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__title\",\n    src: NFLogo,\n    onClick: () => history.push('/'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }\n  }));\n}\n\nexport default Header;","map":{"version":3,"sources":["/home/lewis/papareact-challenge/papareact-day3/src/Header.js"],"names":["React","useState","useRef","SearchRoundedIcon","ChevronLeftRoundedIcon","axios","requests","imageBase","fetchMovie","fetchTV","fetchSearchString","setLoading","NFLogo","UserIcon","auth","useHistory","useLocation","NavLink","Header","setSearchResult","popularVisible","resetApp","input","setInput","inputEl","searchEl","searchOpen","setSearchOpen","history","location","errorOccurred","error","alert","console","log","message","goBack","push","searchQuery","query","get","then","response","data","total_results","results","catch","err","handleSearch","e","preventDefault","stopPropagation","current","blur","setTimeout","handleUser","currentUser","searchClick","focus","pathname","fontSize","target","value","photoURL","displayName","email"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport SearchRoundedIcon from \"@material-ui/icons/SearchRounded\";\nimport ChevronLeftRoundedIcon from \"@material-ui/icons/ChevronLeftRounded\";\nimport \"./Header.css\";\nimport axios from './axios';\nimport requests, { imageBase, fetchMovie, fetchTV, fetchSearchString, setLoading } from './api';\nimport NFLogo from './assets/logo.png';\nimport UserIcon from './assets/nfuser.jpg';\nimport {auth} from './firebase';\nimport {useHistory, useLocation, NavLink} from 'react-router-dom';\n\nfunction Header({ setSearchResult, setLoading, popularVisible, resetApp }) {\n  const [input, setInput] = useState('');\n  const inputEl = useRef(null);\n  const searchEl = useRef(null);\n  const [searchOpen, setSearchOpen] = useState(false);\n  const history = useHistory();\n  const location = useLocation();\n\n  const errorOccurred = (error) => {\n\tsetLoading(false);\n\talert('Something went wrong.');\n\tconsole.log(error.message);\n  }\n  \n  const goBack = () => {\n  \tresetApp();\n  \thistory.push('/');\n  }\n\n  const searchQuery = (query) => {\n  \thistory.push('/');\n    axios.get(fetchSearchString(query)).then((response) => {\n      if (response.data.total_results < 1) {\n        alert(\"No Results Found\");\n        setLoading(false);\n      } else {\n        setSearchResult(response.data.results);\n      }\n    }).catch((err) => errorOccurred(err));\n  }\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    searchQuery(input);\n    setSearchOpen(false);\n    inputEl.current.blur();\n    setLoading(true);\n    setTimeout(() => setInput(''), 100);\n  }\n\n  const handleUser = () => {\n  \tif (auth.currentUser) {\n  \t\thistory.push('/profile');\n  \t} else {\n  \t\thistory.push('/login');\n  \t}\n  }\n  \n  const searchClick = () => {\n    setSearchOpen(true);\n    setTimeout(() => { inputEl.current.focus() }, 300);\n  }\n\n  return (\n    <div className=\"app__header\">\n\t\t\t<ul className=\"app__nav\">\n\t\t\t\t{(!popularVisible || location.pathname !== '/') && <li className=\"app__back mobile\" onClick={goBack}><ChevronLeftRoundedIcon style={{ fontSize: 24 }} /></li>}\n\t\t\t\t<li className={`app__search mobile ${(searchOpen || input) ? \"open\" : \"\"}`} onClick={searchClick}>\n\t\t\t\t\t<SearchRoundedIcon style={{ fontSize: 20 }} className=\"app__searchIcon\" onClick={searchClick} />\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<input ref={inputEl} type=\"search\" value={input} onBlur={() => setSearchOpen(false)} onChange={(e) => setInput(e.target.value)} placeholder=\"Search...\" />\n\t\t\t\t\t\t<button onClick={(e) => handleSearch(e)} type=\"submit\"></button>\n\t\t\t\t\t</form>\n\t\t\t\t</li>\n\t\t\t\t<li><NavLink exact to=\"/\" activeClassName=\"active\">Home</NavLink></li>\n\t\t\t\t<li><NavLink to=\"/about\" activeClassName=\"active\">About</NavLink></li>\n\t\t\t\t<li><a href=\"#\">Movies</a></li>\n\t\t\t\t<li><a href=\"#\">Series</a></li>\n\t\t\t\t<li><a href=\"#\">Featured</a></li>\n\t\t\t</ul>\n\t\t\t<div className=\"app__user\" onClick={handleUser}>\n\t\t\t\t<img src={auth.currentUser?.photoURL || UserIcon} />\n\t\t\t\t<span>{auth.currentUser?.displayName || auth.currentUser?.email || 'Login'}</span>\n\t\t\t</div>\n\t\t\t<img className=\"app__title\" src={NFLogo} onClick={()=>history.push('/')}/>\n\t\t</div>\n  )\n}\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}